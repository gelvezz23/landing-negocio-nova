<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario de contacto</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://www.google.com/recaptcha/api.js?hl=es"
      async
      defer
    ></script>
  </head>
  <style>
    * {
      padding: 0px;
      margin: 0px;
      overflow-x: hidden;
    }
    input {
      border: 0px !important;
      border-bottom: 1px solid gray !important;
      border-radius: 0px !important;
    }
    .g-recaptcha div {
      overflow-y: hidden;
    }

    .lds-ring {
      display: inline-block;
      position: relative;
      width: 40px;
      height: 40px;
    }
    .lds-ring div {
      box-sizing: border-box;
      display: block;
      position: absolute;
      width: 25px;
      height: 25px;
      margin: 8px;
      border: 8px solid #fff;
      border-radius: 50%;
      animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
      border-color: #cef transparent transparent transparent;
    }
    .lds-ring div:nth-child(1) {
      animation-delay: -0.45s;
    }
    .lds-ring div:nth-child(2) {
      animation-delay: -0.3s;
    }
    .lds-ring div:nth-child(3) {
      animation-delay: -0.15s;
    }
    @keyframes lds-ring {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
  </style>

  <body>
    <form class="row g-3" id="form" method="POST">
      <div class="col-md-6">
        <div class="row">
          <label class="col-md-6 col-form-label">Tipo de documento:</label>
          <div class="col-md-6">
            <select
              class="form-select"
              name="sasa_tipodocumento_c"
              aria-label="Tipo de documento"
            >
              <option value="61">INE</option>
              <option value="62">FM2</option>
              <option value="07">Pasaporte</option>
            </select>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          placeholder="*Numero de documento"
          name="sasa_nrodocumento_c"
          required
        />
      </div>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          placeholder="*Nombre de contacto"
          name="first_name"
          required
        />
      </div>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          placeholder="*Apellido de contacto"
          name="last_name"
          required
        />
      </div>
      <div class="col-md-6">
        <input
          type="email"
          class="form-control"
          placeholder="Correo electronico"
          name="email1"
          required
        />
      </div>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          placeholder="*Telefono movil"
          name="phone_mobile"
          required
        />
      </div>

      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          placeholder="Ciudad"
          name="Ciudad"
          required
        />
      </div>
      <div class="col-md-6">
        <input
          type="text"
          class="form-control"
          placeholder="Municipio"
          name="Municipio"
          required
        />
      </div>

      <div class="col-md-12" style="margin-top: 40px">
        <textarea
          rows="10"
          cols="50"
          required
          style="width: 100%; height: 100px; padding: 10px"
          placeholder="*Motivo de contacto"
          name="description"
        ></textarea>
      </div>

      <div class="col-md-7">
        <div class="row">
          <div class="col-md-5">
            <label class="">Autorizo envio de e-mail</label>
          </div>

          <div class="col-md-2">
            <input
              style="
                border: 1px solid gray !important;
                border-radius: 25px !important;
              "
              class="form-check-input"
              type="radio"
              id="si"
              value="1"
              name="sasa_aceptacondiciones_c"
              required
            />
            <label class="form-check-label" for="si">Si</label>
          </div>
          <div class="col-md-2">
            <input
              style="
                border: 1px solid gray !important;
                border-radius: 25px !important;
              "
              class="form-check-input"
              id="no"
              type="radio"
              value="0"
              name="sasa_aceptacondiciones_c"
              required
            />
            <label class="form-check-label" for="no">No</label>
          </div>
        </div>
      </div>
      <div class="col-md-12">
        <div
          id="g-recap"
          class="g-recaptcha"
          data-sitekey="6LcjEVkfAAAAAABMojd4eVvc089IUiNeVKUENTPa"
          data-callback="verifyCaptcha"
        ></div>
        <div id="g-recaptcha-error"></div>
      </div>
      <div class="col-md-12">
        <div class="d-flex justify-content-center">
          <input
            style="border: 1px solid black !important"
            class="form-check-input"
            type="checkbox"
            value=""
            id="defaultCheck1"
            required
          />
          <label class="form-check-label" for="defaultCheck1">
            <strong>
              Acepto
              <a href="#" data-toggle="modal" data-target="#exampleModal"
                >politica de privacidad</a
              ></strong
            >
          </label>
        </div>
      </div>
      <input type="hidden" name="Sociedad" value="AGNM" />
      <input type="hidden" name="Agencia" value="KAGNM" />
      <input type="hidden" name="url" value="https://www.novaventa.com.mx/" />
      <input type="hidden" name="primary_address_country" value="Mexico" />
      <input type="hidden" name="lead_source" value="Web Site" />
      <div class="col-md-12 d-flex justify-content-center">
        <div class="lds-ring" id="loading">
          <div></div>
          <div></div>
          <div></div>
          <div></div>
        </div>
      </div>
      <div class="col-12 d-flex justify-content-center">
        <button
          type="submit"
          class="btn btn-primary"
          id="botonsubmit"
          style="background: blue"
        >
          ENVIAR
        </button>
      </div>
    </form>

    <div
      class="modal fade fullscreen-modal"
      id="exampleModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <iframe
              src="./resources/archivo.pdf"
              style="width: 100%; height: 700px"
              frameborder="0"
            ></iframe>
          </div>
        </div>
      </div>
    </div>

    <script>
      // https://formspree.io/f/xbjwzjjo
      $("#loading").css("display", "none");

      function handleSubmit(event) {
        $("#loading").css("display", "block");

        const botonSubmit = document.getElementById("botonsubmit");

        botonSubmit.disabled = true;
        event.preventDefault();
        function submitUserForm() {
          var response = grecaptcha.getResponse();
          if (response.length == 0) {
            document.getElementById("g-recaptcha-error").innerHTML =
              '<span style="color:red;">This field is required.</span>';
            $("#loading").css("display", "none");
            botonSubmit.disabled = false;
            return false;
          }
          return true;
        }

        function verifyCaptcha() {
          document.getElementById("g-recaptcha-error").innerHTML = "";
        }

        if (submitUserForm()) {
          const urlTest =
            "https://script.google.com/macros/s/AKfycbzFa86rGk56lZMC26NpxpRvhFJylcmV6zFkZFLGPIOUT-IT8uk/exec";
          const urlProd =
            "https://script.google.com/macros/s/AKfycbwSV2pRfRxDMe2TlLlrr6uogbMxZPBDUbtsE05YgmHVpInxD2C9/exec";
          var data = new FormData(event.target);
          fetch(urlProd, {
            method: form.method,
            body: data,
            headers: {
              Accept: "application/json",
            },
          })
            .then((response) => {
              if (response.ok) {
                alert("registro exitoso.");
                $("#loading").css("display", "none");
                botonSubmit.disabled = false;
              } else {
                response.json().then((data) => {
                  if (Object.hasOwn(data, "errors")) {
                    status.innerHTML = data["errors"]
                      .map((error) => alert(error["message"]))
                      .join(", ");
                  } else {
                    botonSubmit.disabled = false;

                    alert("Oops! There was a problem submitting your form");
                  }
                });
              }
            })
            .catch((error) => {
              botonSubmit.disabled = false;
              alert("Oops! There was a problem submitting your form");
            });
        }
      }
      const form = document.querySelector("#form");
      form.addEventListener("submit", handleSubmit);
    </script>
  </body>
</html>
